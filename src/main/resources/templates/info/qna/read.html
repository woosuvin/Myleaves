<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base_layout}">
<main layout:fragment="main">
	<div class="mb-5 text-center">
		<h3>QnA</h3>
	</div>
	<div style="text-align: right;" class="my-4">
		<a class="btn btn-outline-dark" th:href="@{/info/qna/create}">λ¬Έμ</a>
	</div>
	 <div th:if="${qnas.empty}">
        <p class="text-center">λ“±λ΅λ QnAκ°€ μ—†μµλ‹λ‹¤.</p>
    </div>
	<div th:if="${not qnas.empty}">
		<table class="table table-hover">
			<colgroup>
				<col width="1%">
				<col width="8%">
				<col width="1%">
				<col width="1%">
				<col width="1%">
			</colgroup>
			<thead class="text-center">
				<tr>
					<th scope="col">λΉ„λ°€κΈ€</th>
					<th scope="col">μ λ©</th>
					<th scope="col">μ‘μ„±μ</th>
					<th scope="col">μ‘μ„±μΌ</th>					
					<th scope="col">μ§„ν–‰μƒνƒ</th>
				</tr>
			</thead>
			<tbody class="text-center">
				<tr th:each="qna: ${qnas}">
					<td th:if="${qna.secret == 1}">π”’</td>
					<td th:if="${qna.secret == 0}">π—
					<td class="d-none" th:text="${qna.qid}" ></td>
					<td
						th:if="${qna.secret == 1 && qna.userId == #authentication.name}">
						<a th:href="@{/info/qna/detail?qid={id}(id=${qna.qid})}"
						class="text-decoration-none text-reset"
						th:text="${qna.title}"
						></a>
					</td>
					<td
						th:if="${qna.secret == 1 && qna.userId != #authentication.name}">
						<a href="#" onclick="showSecretMessage(); return false;" th:text="${qna.title}"
						class="text-decoration-none text-reset"></a>
					</td>
					<td
						th:if="${qna.secret == 0}">
						<a th:href="@{/info/qna/detail?qid={id}(id=${qna.qid})}" 
						class="text-decoration-none text-reset"
						th:text="${qna.title}"></a>
					</td>
					<td th:text="${qna.userId}"></td>
					<td th:text="${#temporals.format(qna.createdDate, 'yyyy-MM-dd HH:mm')}"></td>
					
					<!-- κ΄€λ¦¬μ νμ΄μ§€μ— ν™•μΈ ν•  κ±°μ„ -->
					<td th:if="${#strings.isEmpty(qna.an_title)}">ν™•μΈμ¤‘</td>
					<td th:if="${not #strings.isEmpty(qna.an_title)}">ν™•μΈμ™„λ£</td>
				</tr>
			</tbody>
		</table>	
	<!-- νμ΄μ§•μ²λ¦¬ μ‹μ‘ -->	
	<nav aria-label="...">
	    <ul class="pagination pagination-sm justify-content-center">
	        <!-- μ΄μ „ νμ΄μ§€ μ„ΈνΈλ΅ κ°€λ” ν™”μ‚΄ν‘-->
	        <li th:if="${startPage > 1}" class="page-item">
	            <a th:href="@{/info/qna(page=${startPage - 2})}" class="page-link">&laquo;</a>
	        </li>
	        <!-- νμ΄μ§€ λ²νΈλ“¤ (μµλ€ 5κ°κΉμ§€ ν‘μ‹)-->
	        <li th:each="page : ${#numbers.sequence(startPage, endPage)}"
	            class="page-item">
	            <a th:if="${page == nowPage}" class="page-link active" th:text="${page}" style="color: white; background-color: black; border-color: black;"></a>
	            <a th:if="${page != nowPage}" th:href="@{/info/qna(page=${page - 1})}" class="page-link" th:text="${page}" style="color: black;"></a>
	        </li>
        <!-- λ‹¤μ νμ΄μ§€ μ„ΈνΈλ΅ κ°€λ” ν™”μ‚΄ν‘-->
        	<li th:if="${endPage < qnas.totalPages}" class="page-item">
            	<a th:href="@{/info/qna(page=${endPage})}" class="page-link">&raquo;</a>
        	</li>
    	</ul>
	</nav>
</div>	
		
	<script src="/js/info/qna/qna_list.js"></script>
</main>
</html>